# Go EPUB Translator

A lightweight command-line tool written in Go to translate EPUB e-books while keeping their original formatting intact.

## About this Project

This tool automates the process of translating e-books by parsing the internal structure of an EPUB file and translating the content block by block.
It was developed with modern AI-assisted coding workflows to create a seamless bridge between LLM capabilities and the classic EPUB format.

### Disclaimer

* **Not an official product:** This project is independent and not affiliated with Google.
* **Personal Project:** This tool was built to solve a personal need. It might not be perfect for every use case, but it works reliably for my own translation tasks.
* **AI-Assisted Development:** I used AI to help with formatting and other tasksâ€”in fact, this README was largely generated by Gemini.
* **Cost Warning:** Using the Gemini API incurs costs. While I typically pay around $0.50 per book, your actual costs may vary depending on the book's length and the model used.
## Features
- **AI-Powered Translations:** Uses **Google Gemini** (supporting models like `gemini-1.5-flash` or `gemini-2.0-flash-exp`) for high-quality German translations.
- **HTML Preservation:** Intelligently translates text while strictly preserving HTML tags (`<em>`, `<strong>`, etc.) to keep the book's styling perfect.
- **Robustness:** Built-in exponential backoff to handle API rate limits and connection issues gracefully.

## Setup & Usage

### Local Installation
1. **Clone the repository:**
```bash
git clone https://github.com/sg6/epub-translator.git
cd epub-translator
```

2. **Environment Variables:** Copy `example.env` to `.env` and fill in your API key.

3. **Install dependencies:**
```bash
go mod tidy
```

4. **Run:**
```bash
go run main.go path/to/your/book.epub
```

### Docker / OCI Image
If you don't want to install Go, you can use Docker.

1. **Build the image:**
```bash
docker build -t epub-translator -f Containerfile .
```

2. **Run the container:**
Pass your `.env` file and mount the directory containing your EPUB files. This command removes the container after execution (`--rm`).

On Linux, to ensure the output file has the correct permissions, it's recommended to run the container with the current user's UID and GID.

You can also remove the `-v "$(pwd):/data"` part.

```bash
docker run --rm \
  --user "$(id -u):$(id -g)" \
  --env-file .env \
  -v "$(pwd):/data" \
  -w /data \
  epub-translator path/to/your/book.epub
```

5. The output is available as `translated-{ebook-name}.epub`

## Requirements
- Go 1.24+
- A Google Gemini API Key